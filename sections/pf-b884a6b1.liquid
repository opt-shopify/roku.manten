{% comment %}
This file is auto-generated by PageFly. The content can be overridden when publish page in PageFly. Please do not update this file directly.
If you plan to remove PageFly, please see the guide in our help center first: https://help.pagefly.io/.
{% endcomment %}
<style></style><div style="opacity:0" class="sc-eQxpLG kmqMaZ __pf __pf_L99L6LoI" id="__pf"><div data-pf-type="Body" class="sc-dkYRCH hYpqjU pf-15_"><div data-pf-type="Layout" class="sc-fHeRUh ihgygX pf-16_"><div data-section-id="pf-09ac" data-pf-type="Section" class="sc-hAcGzb jHOovW pf-17_"><div style="--cw:1170px" class="sc-eGPXGI cIlovf"><div class="sc-iCfMLu eehqFj pf-18_ pf-r pf-r-eh" style="--s-xs:15px" data-pf-type="Row"><div class="pf-c" style="--c-xs:12;--c-md:12;--c-lg:12"><div data-pf-type="Column" class="sc-XxNYO eWQzGj pf-19_"><div data-pf-type="Custom.HTML" class="pf-20_" store="[object Object]"><!DOCTYPE html>
<html>

<head>
    <title>Storage Form</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
</head>

<body>
    <div id="interactive" class="viewport"></div>
    <form id="storageForm">
        <label for="employeeId">Employee ID:</label>
        <input type="text" id="employeeId" readonly><br><br>
        <label for="storageId">Storage ID:</label>
        <input type="text" id="storageId" readonly><br><br>
        <label for="customerId">Customer ID:</label>
        <input type="text" id="customerId" readonly><br><br>
        <button type="button" onclick="startScanner('employeeId')">Scan Employee ID</button>
        <button type="button" onclick="startScanner('storageId')">Scan Storage ID</button>
        <button type="button" onclick="startScanner('customerId')">Scan Customer ID</button><br><br>
        <button type="submit">Submit</button>
    </form>

    <script>
        var _scannerIsRunning = false;
        var _currentInputField;

        function startScanner(fieldId) {
            if (_scannerIsRunning) {
                Quagga.stop();
                _scannerIsRunning = false;
            } else {
                _currentInputField = fieldId;
                Quagga.init({
                    inputStream: {
                        name: "Live",
                        type: "LiveStream",
                        target: document.querySelector('#interactive'),
                        constraints: {
                            facingMode: "environment"
                        },
                    },
                    decoder: {
                        readers: [
                            "code_128_reader",
                            "ean_reader",
                            "ean_8_reader",
                            "code_39_reader",
                            "code_39_vin_reader",
                            "codabar_reader",
                            "upc_reader",
                            "upc_e_reader",
                            "i2of5_reader"
                        ],
                        debug: {
                            drawBoundingBox: true,
                            showFrequency: true,
                            drawScanline: true,
                            showPattern: true
                        }
                    },
                }, function (err) {
                    if (err) {
                        console.log(err);
                        return;
                    }
                    Quagga.start();
                    _scannerIsRunning = true;
                });

                Quagga.onDetected(function (result) {
                    document.getElementById(_currentInputField).value = result.codeResult.code;
                    Quagga.stop();
                    _scannerIsRunning = false;
                });
            }
        }

document.getElementById('storageForm').addEventListener('submit', function(event) {
    event.preventDefault();

    // Gather data from form
    var data = {
        employeeId: document.getElementById('employeeId').value,
        storageId: document.getElementById('storageId').value,
        customerId: document.getElementById('customerId').value
    };

    // Send data to Google Apps Script Web App
fetch('https://script.google.com/macros/s/AKfycbxUTSxcTY7Kj2jTImIIc21F9eGUNRfvkM7iUMolhFB2fTRM3a22y6O3x8Ag3pk7Drimkg/exec', {
    method: 'POST',
    mode: 'cors', // Add this line
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify(data)
})
.then(response => response.json())
.then(data => {
    console.log("Data successfully sent to Google Sheets:", data);
    alert("Data submitted successfully.");
})
.catch(error => {
    console.error("Error:", error);
});
});
    </script>
</body>

</html></div></div></div></div></div></div></div></div></div><script>
    !function(){window.__pagefly_setting__&&(window.__pagefly_setting2__=window.__pagefly_setting__),window.__pagefly_setting__={"baseURL":"https://apps.pagefly.io","analyticsURL":"https://analytics.pagefly.io","isBackend":false,"cdnURL":"https://cdn.pagefly.io","pageflyVersion":"4.9.2","shopDomain":"manten-roku.myshopify.com","elementData":{},"pageTitle":"BarCode Scan","pageType":"page","pageId":"b884a6b1-242f-4f4b-a8ba-0887103309ac","lazyLoad":true,"forceByPassGoogleLightHouse":false,"imageLazyLoad":true,"nativeImageLazyLoad":true,"useThemeJQ":false,"selectedFonts":{},"trackingIDs":[],"shopifyProxyPath":"/a/pf_preview"},window.__pagefly_setting2__&&(window.__pagefly_setting__=function _(d,b){let c={...d||{}};for(let a of Object.keys(b))b[a]instanceof Object&&(Array.isArray(b[a])&&c[a]?Object.assign(b[a],[...b[a],...c[a]]):Object.assign(b[a],_(c[a],b[a])));return Object.assign(c||{},b),c}(__pagefly_setting2__,__pagefly_setting__),delete window.__pagefly_setting2__),window.__pagefly_setting__.moneyFormat={{shop.money_format|json}}}();
    </script><script src="https://cdn.pagefly.io/pagefly/4.9.2/core/helper.js" async></script>
{% schema %}
{
  "name": "PageFly Page b884a6b1",
  "settings": [
    {
      "type": "paragraph",
      "content": "For full configuration, [visit PageFly Editor](https://manten-roku.myshopify.com/admin/apps/pagefly/editor?id=b884a6b1-242f-4f4b-a8ba-0887103309ac&type=page)."
    }
  ],
  "blocks": [
    {
      "type": "@app"
    }
  ]
}
{% endschema %}